{"version":3,"sources":["./frontend/api_util.js","./frontend/follow_toggle.js","./frontend/tweet_compose.js","./frontend/users_search.js","webpack/bootstrap","./frontend/twitter.js"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA,mBAAmB,GAAG;AACtB;AACA,GAAG;AACH;AACA;AACA,mBAAmB,GAAG;AACtB;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA,yB;;;;;;;;;;AC5BA,OAAO,2BAA2B,GAAG,mBAAO,CAAC,0CAAY;;;AAGzD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,YAAY;AAChC;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8B;;;;;;;;;;ACpEA,OAAO,cAAc,GAAG,mBAAO,CAAC,0CAAY;;AAE5C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,cAAc;AAC9D;;AAEA,iBAAiB;AACjB;AACA;;AAEA;;AAEA,6B;;;;;;;;;;AC7BA,qBAAqB,mBAAO,CAAC,oDAAiB;AAC9C,OAAO,cAAc,GAAG,mBAAO,CAAC,0CAAY;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;;AAGA,6B;;;;;;UCpCA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;ACtBA,qBAAqB,mBAAO,CAAC,oDAAiB;AAC9C,oBAAoB,mBAAO,CAAC,kDAAgB;AAC5C,qBAAqB,mBAAO,CAAC,oDAAiB;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH,CAAC,C","file":"bundle.js","sourcesContent":["const APIUtil = {\n  followUser: id => $.ajax({\n    method: \"POST\",\n    url: `/users/${id}/follow`,\n    dataType: \"JSON\"\n  }),\n  unfollowUser: id => $.ajax({\n    method: \"DELETE\",\n    url: `/users/${id}/follow`,\n    dataType: \"JSON\"\n  }),\n  searchUsers: queryVal => $.ajax({\n    method: 'GET',\n    url: '/users/search',\n    dataType: 'JSON',\n    data: {\n      query: queryVal\n    }\n  }),\n  createTweet: data => $.ajax({\n      method: 'POST',\n      url: '/tweets',\n      dataType: 'JSON',\n      data\n  })\n\n}\n\nmodule.exports = APIUtil;","const { followUser, unfollowUser } = require(\"./api_util\")\n\n\nclass FollowToggle {\n\n  constructor(el) {\n    this.$el = $(el);\n    this.userId = this.$el.data('user-id')\n    this.followState = this.$el.data('initial-follow-state')\n    this.$el.on('click', this.handleClick.bind(this))\n  }\n\n  render() {\n    this.$el.text(this.followState ? 'Unfollow!' : 'Follow!');\n  }\n\n  handleClick(event) {\n    event.preventDefault();\n    this.$el.prop(\"disabled\", true);\n\n    if (this.followState) {\n      this.updateAndRender(false)\n      unfollowUser(this.userId)\n        .then(() => this.updateAndRender(false))\n        .always(() => this.$el.prop(\"disabled\", false))\n    } else {\n      this.updateAndRender(true)\n      followUser(this.userId)\n        .then(() => this.updateAndRender(true))\n        .always(() => this.$el.prop(\"disabled\", false))\n    }\n\n  }\n\n  updateElementState(following) {\n    this.$el.data('initial-follow-state', following);\n    this.followState = this.$el.data('initial-follow-state');\n  }\n\n  updateAndRender(following) {\n    this.updateElementState(following);\n    this.render();\n  }\n\n  // $.ajax({\n  // method: this.followState ? 'DELETE' : 'POST',\n  // url: `/users/${this.userId}/follow`,\n  // dataType: 'JSON',\n\n  // success: (follow) => {\n  //   this.$el.data('initial-follow-state', !this.followState);\n  //   this.followState = this.$el.data('initial-follow-state');\n  //   this.render();\n  // }\n  // })\n\n}\n\nFollowToggle.createJQueryObject = function (user) {\n  const $followButton = $('<button>')\n  $followButton.addClass('follow-toggle')\n  $followButton.attr('data-user-id', user.id)\n  $followButton.attr('data-initial-follow-state', user.followed)\n  const followToggle = new FollowToggle($followButton.get(0))\n  followToggle.render();\n  return $followButton;\n}\n\nmodule.exports = FollowToggle;","const { createTweet } = require(\"./api_util\")\n\n    class TweetCompose {\n\n        constructor(el) {\n            this.$el = $(el)\n            this.$el.on('submit', this.submit.bind(this))\n        }\n\n        submit(event) {\n            event.preventDefault();\n            const data = this.$el.serializeJSON();\n            $(\":input\").prop(\"disabled\", true);\n            createTweet(data)\n                .then((tweet) => {\n                    console.log(tweet);\n                    const $feed = $(\"#feed\");\n                    const $tweet = $(\"<li>\");\n                    $tweet.text(tweet.content);\n                    const $link = $(\"<a>\");\n                    $link.attr(\"href\", `users/${tweet.user_id}`);\n                    $feed.append($tweet);\n                    \n                })\n                .always(() => $(\":input\").prop(\"disabled\", false))\n        }\n\n    }\n\nmodule.exports = TweetCompose","const FollowToggle = require('./follow_toggle');\nconst { searchUsers } = require('./api_util');\n\nclass UsersSearch {\n  constructor(el) {\n    this.$el = $(el);\n    this.$input = $('.users-search input');\n    this.$ul = $('.users-search .users');\n    this.$input.on('input', this.handleInput.bind(this))\n  }\n\n  handleInput(event) {\n    searchUsers(event.target.value)\n      .then((users) => {\n        this.render(users);\n      })\n      .fail((error) => console.log(error))\n  }\n\n  render(users) {\n    this.$ul.empty()\n    users.forEach((user) => {\n      const $user = $('<li>')\n      const $link = $('<a>')\n      $link.attr('href', `users/${user.id}`)\n      $link.text(user.username)\n      $user.append($link)\n      const $followButton = FollowToggle.createJQueryObject(user)\n      $user.append($followButton)\n      this.$ul.append($user)\n    })\n  }\n\n}\n\n\nmodule.exports = UsersSearch;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const FollowToggle = require('./follow_toggle');\nconst UsersSearch = require('./users_search')\nconst TweetCompose = require(\"./tweet_compose\")\n\n$(() => {\n  // find the element .follow-toggle\n  //. instanitate FollowToggle instance\n  $('.follow-toggle').each(function(index, el) {\n    // el is htmlElement class\n    const followToggle = new FollowToggle(el);\n    followToggle.render();\n  })\n\n  $('.users-search').each(function(index, el) {\n    // el is htmlElement class\n    new UsersSearch(el);\n\n  })\n\n  $('.tweet-compose').each(function(_, el) {\n    new TweetCompose(el);\n    console.log(\"I'm working\", el);\n  })\n\n})"],"sourceRoot":""}